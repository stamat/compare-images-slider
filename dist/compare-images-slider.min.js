/* compare-images-slider v1.0.0 | https://stamat.github.io/compare-images-slider/ | MIT License */
(()=>{function L(e,s){for(const n in s)e[n]=s[n];return e}function P(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}function V(e){return typeof e=="function"}function A(e,s){return!e||!s||Number.isNaN(e)||Number.isNaN(s)?0:e/s*100}function k(e,s){let n=0,d=0,p=0,m=0,o=0,l=0,E=!1,i=e.getBoundingClientRect(),c=null;const a={inertia:!1,bounce:!1,friction:.9,bounceFactor:.5,callback:null};if(V(s)?a.callback=s:P(s)&&L(a,s),!e||e.getAttribute("drag-enabled")==="true")return;e.setAttribute("drag-enabled","true"),e.setAttribute("dragging","false");const f=function(t){w(t),E=!0,e.setAttribute("dragging","true"),c&&(cancelAnimationFrame(c),c=null);const r=new CustomEvent("dragstart",{detail:b()});e.dispatchEvent(r)},v=function(t){if(!E)return;w(t),o=n-p,l=d-m;const r=b();a.callback&&a.callback(r);const h=new CustomEvent("drag",{detail:r});e.dispatchEvent(h)},g=function(){E=!1,e.setAttribute("dragging","false"),a.inertia&&(c=requestAnimationFrame(H));const t=new CustomEvent("dragend",{detail:b()});e.dispatchEvent(t)},w=function(t){const r=t.touches?t.touches[0]:t;t.touches&&t.preventDefault(),p=n,m=d,n=r.pageX,d=r.pageY},b=function(){const t=n-i.left,r=d-i.top,h=A(t,i.width),y=A(r,i.height),u={target:e,x:n,y:d,relativeX:t,relativeY:r,xPercentage:h,yPercentage:y,velocityX:o,velocityY:l,prevX:p,prevY:m};return h<0&&(u.xPercentage=0),h>100&&(u.xPercentage=100),y<0&&(u.yPercentage=0),y>100&&(u.yPercentage=100),u},H=function(){n+=o,d+=l,o*=a.friction,l*=a.friction,a.bounce&&(n<i.left&&(n=i.left,o*=-a.bounceFactor),n>i.width+i.left&&(n=i.width+i.left,o*=-a.bounceFactor),d<i.top&&(d=i.top,l*=-a.bounceFactor),d>i.height+i.top&&(d=i.height+i.top,l*=-a.bounceFactor)),Math.abs(o)<.1&&(o=0),Math.abs(l)<.1&&(l=0);const t=b();if(o!==0||l!==0){a.callback&&a.callback(t);const r=new CustomEvent("draginertia",{detail:t});e.dispatchEvent(r),c=requestAnimationFrame(H)}else{c=null,a.callback&&a.callback(t);const r=new CustomEvent("draginertiaend",{detail:t});e.dispatchEvent(r)}};return e.addEventListener("mousedown",f),e.addEventListener("mousemove",v),e.addEventListener("mouseup",g),e.addEventListener("touchstart",f),e.addEventListener("touchmove",v),e.addEventListener("touchend",g),{destroy:function(){e.removeEventListener("mousedown",f),e.removeEventListener("mousemove",v),e.removeEventListener("mouseup",g),e.removeEventListener("touchstart",f),e.removeEventListener("touchmove",v),e.removeEventListener("touchend",g),c&&(cancelAnimationFrame(c),c=null)}}}var F=class{constructor(e,s){this.element=e,this.frame=this.element.querySelector(".frame"),this.second=this.frame.querySelector(":scope > img"),this.handle=this.element.querySelector(".handle"),this.options={inertia:!1,bounce:!1,friction:.9,bounceFactor:.1,onlyHandleActivation:!1,vertical:!1,inverted:!1},s&&L(this.options,s),this.checkAndApplyAttribute("vertical"),this.checkAndApplyAttribute("inverted"),window.addEventListener("resize",()=>{requestAnimationFrame(this.setupSecondImage.bind(this))}),this.setupSecondImage(),this.drag=k(this.element,this.options),this.handleDragBound=!1,this.boundUpdateVisibleHandler=this.updateVisibleHandler.bind(this);const n=()=>{this.handleDragBound||(this.handleDragBound=!0,this.element.addEventListener("dragstart",this.boundUpdateVisibleHandler),this.element.addEventListener("drag",this.boundUpdateVisibleHandler))},d=()=>{this.handleDragBound&&(this.handleDragBound=!1,this.element.removeEventListener("dragstart",this.boundUpdateVisibleHandler),this.element.removeEventListener("drag",this.boundUpdateVisibleHandler))};this.options.onlyHandleActivation?(this.handle.addEventListener("mousedown",n),this.handle.addEventListener("touchstart",n),document.addEventListener("mouseup",d),document.addEventListener("touchend",d)):(this.element.addEventListener("dragstart",this.boundUpdateVisibleHandler),this.element.addEventListener("drag",this.boundUpdateVisibleHandler)),this.element.addEventListener("draginertia",this.boundUpdateVisibleHandler)}checkAndApplyAttribute(e){(this.element.dataset[e]||this.element.hasAttribute(e))&&(this.options[e]=!0)}setupSecondImage(){const e=this.element.offsetWidth+"px";this.second.style.width=e}updateVisibleHandler(e){if(this.options.inverted){if(this.options.vertical){this.frame.style.height=100-e.detail.yPercentage+"%",this.handle.style.top=100-e.detail.yPercentage+"%";return}this.frame.style.width=100-e.detail.xPercentage+"%",this.handle.style.left=100-e.detail.xPercentage+"%";return}if(this.options.vertical){this.frame.style.height=e.detail.yPercentage+"%",this.handle.style.top=e.detail.yPercentage+"%";return}this.frame.style.width=e.detail.xPercentage+"%",this.handle.style.left=e.detail.xPercentage+"%"}destroy(){this.drag.destroy(),this.element.removeEventListener("dragstart",this.boundUpdateVisibleHandler),this.element.removeEventListener("drag",this.boundUpdateVisibleHandler),this.element.removeEventListener("draginertia",this.boundUpdateVisibleHandler)}};window.CompareImagesSlider||(window.CompareImagesSlider=F,document.dispatchEvent(new CustomEvent("CompareImagesSliderLoaded")))})();
