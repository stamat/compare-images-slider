/* compare-images-slider v1.0.0 | https://stamat.github.io/compare-images-slider/ | MIT License */
(()=>{function y(e,r){for(const s in r)e[s]=r[s];return e}function F(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}function S(e){return typeof e=="function"}function L(e,r){return!e||!r||Number.isNaN(e)||Number.isNaN(r)?0:e/r*100}function k(e,r){let s=0,o=0,m=0,p=0,c=0,d=0,E=!1,i=e.getBoundingClientRect(),l=null;const n={inertia:!1,bounce:!1,friction:.9,bounceFactor:.5,callback:null};if(S(r)?n.callback=r:F(r)&&y(n,r),!e||e.getAttribute("drag-enabled")==="true")return;e.setAttribute("drag-enabled","true"),e.setAttribute("dragging","false");const f=function(t){A(t),E=!0,e.setAttribute("dragging","true"),l&&(cancelAnimationFrame(l),l=null);const a=new CustomEvent("dragstart",{detail:b()});e.dispatchEvent(a)},v=function(t){if(!E)return;A(t),c=s-m,d=o-p;const a=b();n.callback&&n.callback(a);const u=new CustomEvent("drag",{detail:a});e.dispatchEvent(u)},g=function(){E=!1,e.setAttribute("dragging","false"),n.inertia&&(l=requestAnimationFrame(C));const t=new CustomEvent("dragend",{detail:b()});e.dispatchEvent(t)},A=function(t){const a=t.touches?t.touches[0]:t;t.touches&&t.preventDefault(),m=s,p=o,s=a.clientX,o=a.clientY},b=function(){const t=s-i.left,a=o-i.top,u=L(t,i.width),w=L(a,i.height),h={target:e,x:s,y:o,relativeX:t,relativeY:a,xPercentage:u,yPercentage:w,velocityX:c,velocityY:d,prevX:m,prevY:p};return u<0&&(h.xPercentage=0),u>100&&(h.xPercentage=100),w<0&&(h.yPercentage=0),w>100&&(h.yPercentage=100),h},C=function(){s+=c,o+=d,c*=n.friction,d*=n.friction,n.bounce&&(s<i.left&&(s=i.left,c*=-n.bounceFactor),s>i.width+i.left&&(s=i.width+i.left,c*=-n.bounceFactor),o<i.top&&(o=i.top,d*=-n.bounceFactor),o>i.height+i.top&&(o=i.height+i.top,d*=-n.bounceFactor)),Math.abs(c)<.1&&(c=0),Math.abs(d)<.1&&(d=0);const t=b();if(c!==0||d!==0){n.callback&&n.callback(t);const a=new CustomEvent("draginertia",{detail:t});e.dispatchEvent(a),l=requestAnimationFrame(C)}else{l=null,n.callback&&n.callback(t);const a=new CustomEvent("draginertiaend",{detail:t});e.dispatchEvent(a)}};return e.addEventListener("mousedown",f),e.addEventListener("mousemove",v),e.addEventListener("mouseup",g),e.addEventListener("touchstart",f),e.addEventListener("touchmove",v),e.addEventListener("touchend",g),{destroy:function(){e.removeEventListener("mousedown",f),e.removeEventListener("mousemove",v),e.removeEventListener("mouseup",g),e.removeEventListener("touchstart",f),e.removeEventListener("touchmove",v),e.removeEventListener("touchend",g),l&&(cancelAnimationFrame(l),l=null)}}}var I=class{constructor(e,r){this.element=e,this.frame=this.element.querySelector(".frame"),this.second=this.frame.querySelector(":scope > img"),this.handle=this.element.querySelector(".handle"),this.options={inertia:!1,bounce:!1},r&&y(this.options,r),window.addEventListener("resize",()=>{requestAnimationFrame(this.setupSecondImage.bind(this))}),this.setupSecondImage(),this.drag=k(this.element,this.options),this.element.addEventListener("dragstart",this.updateVisibleHandler.bind(this)),this.element.addEventListener("drag",this.updateVisibleHandler.bind(this)),this.element.addEventListener("draginertia",this.updateVisibleHandler.bind(this))}setupSecondImage(){const e=this.element.offsetWidth+"px";this.second.style.width=e}updateVisibleHandler(e){this.frame.style.width=e.detail.xPercentage+"%",this.handle.style.left=e.detail.xPercentage+"%"}destroy(){this.drag.destroy(),this.element.removeEventListener("dragstart",this.updateVisibleHandler.bind(this)),this.element.removeEventListener("drag",this.updateVisibleHandler.bind(this)),this.element.removeEventListener("draginertia",this.updateVisibleHandler.bind(this))}};window.CompareImagesSlider||(window.CompareImagesSlider=I,document.dispatchEvent(new CustomEvent("CompareImagesSliderLoaded")))})();
