/* compare-images-slider v1.0.0 | https://stamat.github.io/compare-images-slider/ | MIT License */
(()=>{function y(e,s){for(const a in s)e[a]=s[a];return e}function F(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}function D(e){return typeof e=="function"}function w(e,s){return!e||!s||Number.isNaN(e)||Number.isNaN(s)?0:e/s*100}function U(e,s){if(!e||!(e instanceof Element)||e.getAttribute("drag-enabled")==="true")return;let a=0,o=0,h=0,u=0,d=0,l=0,E=!1,i=null,c=null;const n={inertia:!1,bounce:!1,friction:.9,bounceFactor:.2,callback:null,preventDefaultTouch:!0};D(s)?n.callback=s:F(s)&&y(n,s),n.friction=Math.abs(n.friction),n.bounceFactor=Math.abs(n.bounceFactor),e.setAttribute("drag-enabled","true"),e.setAttribute("dragging","false");const A=function(){const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX,width:t.width,height:t.height}};i=A();const g=function(t){H(t),E=!0,i=A(),e.setAttribute("dragging","true"),c&&(cancelAnimationFrame(c),c=null);const r=new CustomEvent("dragstart",{detail:m()});e.dispatchEvent(r)},b=function(t){if(!E)return;H(t),d=a-h,l=o-u;const r=m();n.callback&&n.callback(r);const f=new CustomEvent("drag",{detail:r});e.dispatchEvent(f)},p=function(){E=!1,e.setAttribute("dragging","false"),n.inertia&&(c=requestAnimationFrame(V));const t=new CustomEvent("dragend",{detail:m()});e.dispatchEvent(t)},H=function(t){const r=t.touches?t.touches[0]:t;t.touches&&n.preventDefaultTouch&&t.preventDefault(),h=a,u=o,a=r.pageX,o=r.pageY},m=function(){const t=a-i.left,r=o-i.top,f=w(t,i.width),L=w(r,i.height),v={target:e,x:a,y:o,relativeX:t,relativeY:r,xPercentage:f,yPercentage:L,velocityX:d,velocityY:l,prevX:h,prevY:u};return f<0&&(v.xPercentage=0),f>100&&(v.xPercentage=100),L<0&&(v.yPercentage=0),L>100&&(v.yPercentage=100),v},V=function(){a+=d,o+=l,d*=n.friction,l*=n.friction,n.bounce&&(a<i.left&&(a=i.left,d*=-n.bounceFactor),a>i.width+i.left&&(a=i.width+i.left,d*=-n.bounceFactor),o<i.top&&(o=i.top,l*=-n.bounceFactor),o>i.height+i.top&&(o=i.height+i.top,l*=-n.bounceFactor)),Math.abs(d)<.1&&(d=0),Math.abs(l)<.1&&(l=0);const t=m();if(d!==0||l!==0){n.callback&&n.callback(t);const r=new CustomEvent("draginertia",{detail:t});e.dispatchEvent(r),c=requestAnimationFrame(V)}else{c=null,n.callback&&n.callback(t);const r=new CustomEvent("draginertiaend",{detail:t});e.dispatchEvent(r)}};return e.addEventListener("mousedown",g),e.addEventListener("mousemove",b),e.addEventListener("mouseup",p),e.addEventListener("touchstart",g),e.addEventListener("touchmove",b),e.addEventListener("touchend",p),{destroy:function(){e.removeEventListener("mousedown",g),e.removeEventListener("mousemove",b),e.removeEventListener("mouseup",p),e.removeEventListener("touchstart",g),e.removeEventListener("touchmove",b),e.removeEventListener("touchend",p),c&&(cancelAnimationFrame(c),c=null)}}}var k=class{constructor(e,s){this.element=e,this.frame=this.element.querySelector(".frame"),this.second=this.frame.querySelector(":scope > img"),this.handle=this.element.querySelector(".handle"),this.options={inertia:!1,bounce:!1,friction:.9,bounceFactor:.1,onlyHandle:!0,vertical:!1},s&&y(this.options,s),this.checkAndApplyAttribute("vertical"),this.options.vertical&&!(this.element.dataset.vertical||this.element.hasAttribute("vertical"))&&this.element.setAttribute("vertical",""),this.options.onlyHandle&&(this.options.preventDefaultTouch=!1),window.addEventListener("resize",()=>{requestAnimationFrame(this.setupSecondImage.bind(this))}),this.setupSecondImage(),this.drag=U(this.element,this.options),this.handleDragBound=!1,this.boundUpdateVisibleHandler=this.updateVisibleHandler.bind(this);const a=u=>{this.handleDragBound&&u.preventDefault()},o=()=>{this.handleDragBound||(this.handleDragBound=!0,this.element.addEventListener("dragstart",this.boundUpdateVisibleHandler),this.element.addEventListener("drag",this.boundUpdateVisibleHandler),this.element.addEventListener("draginertia",this.boundUpdateVisibleHandler),this.element.addEventListener("draginertiaend",()=>{this.element.removeEventListener("draginertia",this.boundUpdateVisibleHandler)}),this.element.addEventListener("touchstart",a))},h=()=>{this.handleDragBound&&(this.handleDragBound=!1,this.element.removeEventListener("dragstart",this.boundUpdateVisibleHandler),this.element.removeEventListener("drag",this.boundUpdateVisibleHandler),this.element.removeEventListener("touchstart",a))};this.options.onlyHandle?(this.handle.addEventListener("mousedown",o),this.handle.addEventListener("touchstart",o),document.addEventListener("mouseup",h),document.addEventListener("touchend",h)):(this.element.addEventListener("dragstart",this.boundUpdateVisibleHandler),this.element.addEventListener("drag",this.boundUpdateVisibleHandler),this.element.addEventListener("draginertia",this.boundUpdateVisibleHandler))}checkAndApplyAttribute(e){(this.element.dataset[e]||this.element.hasAttribute(e))&&(this.options[e]=!0)}setupSecondImage(){const e=this.element.offsetWidth+"px";this.second.style.width=e}updateVisibleHandler(e){if(this.options.vertical){this.frame.style.height=e.detail.yPercentage+"%",this.handle.style.top=e.detail.yPercentage+"%";return}this.frame.style.width=e.detail.xPercentage+"%",this.handle.style.left=e.detail.xPercentage+"%"}destroy(){this.drag.destroy(),this.element.removeEventListener("dragstart",this.boundUpdateVisibleHandler),this.element.removeEventListener("drag",this.boundUpdateVisibleHandler),this.element.removeEventListener("draginertia",this.boundUpdateVisibleHandler)}};window.CompareImagesSlider||(window.CompareImagesSlider=k,document.dispatchEvent(new CustomEvent("CompareImagesSliderLoaded")))})();
